/*
 * DamNums: by Xaser Acheron
 */

class DamNum : Actor
{
	int font; // [TODO] implement via enum
	int digitCount;
	int digitPlace;
	uint8 digitValue;
	
	const fadeAmt = 0.05;
	
	Default
	{
		RenderStyle 'Add';
		Alpha 1.0;
		Gravity 0.5;
		Scale 0.75;

		-SOLID;
		+NOBLOCKMAP;
	}
	States
	{
	Spawn:
		#### # 10 Bright NoDelay DamNum_A_Init();
		#### # 1 Bright A_FadeOut(fadeAmt, 1);
		Wait;
	}
	
	/*
	 * [TODO] move this to something like PostBeginPlay maybe
	 */
	action void DamNum_A_Init()
	{
		// Determine which font to use.
		DamNum this = DamNum(self);
		int digitCount = (this.digitCount == 0) ? 1 : this.digitCount;
		int digitPlace = (this.digitPlace == 0) ? 1 : this.digitPlace;

		// [TODO] add more fonts. Just assume the only one we have so far.
		string fontSprite = "ND" .. digitCount .. digitPlace;
		self.sprite = GetSpriteIndex(fontSprite);
		
		// set the frame to the desired digit; since frames A-J (which is 0-9
		// in integer-speak) correspond exactly to the digits 0-9, we're good. Whoop!
		// [XA] investigate bizarre "Self pointer used in ambiguous context" error o_O
		self.frame = DamNum(self).digitValue;
	}
}
